[{"title":"坐标和跨窗口通信","date":"2024-04-09T13:36:40.000Z","path":"posts/f9f311a7/","text":"效果预览该效果来自抖音 @渡一前端打开标签后，可以拖动图片，查看不同窗口的效果，可以拖动到其他窗口打开新窗口1打开新窗口2 HTML1&lt;img src=\"./images/logo.png\" class=\"img\" draggable=\"false\"&gt; CSS1234567body &#123; margin: 0; padding: 0;&#125;.img &#123; position: fixed;&#125; JavaScript123456789101112131415161718192021222324252627282930313233343536373839404142434445464748const img = document.querySelector('.img');// 计算浏览器toolbar的高度function barHeight()&#123; return window.outerHeight - window.innerHeight;&#125;// 计算图片在屏幕的坐标function clientToScreen(x, y)&#123; let screenX = x + window.screenX; let screenY = y + window.screenY + barHeight(); return [screenX, screenY];&#125;// 计算图片在浏览器中的坐标function screenToClient(x, y)&#123; let clientX = x - window.screenX; let clientY = y - window.screenY - barHeight(); return [clientX, clientY];&#125;const channel = new BroadcastChannel(\"img\")// 接收坐标信息，并计算当前浏览器图片坐标channel.onmessage = (e)=&gt;&#123; let [x, y] = screenToClient(...e.data) img.style.left = x + 'px'; img.style.top = y + 'px';&#125;;img.onmousedown = (e)=&gt;&#123; // 计算鼠标在图片中的坐标下x,y let x = e.pageX - img.offsetLeft; let y = e.pageY - img.offsetTop; window.onmousemove = (e)=&gt;&#123; // 计算图片当前拖动到的位置cx,cy let cx = e.pageX - x; let cy = e.pageY - y; img.style.left = cx + 'px'; img.style.top = cy + 'px'; let point = clientToScreen(cx, cy); // 发送点坐标到其他窗口 channel.postMessage(point) &#125;; window.onmouseup = (e)=&gt;&#123; window.onmousemove = null; window.onmouseup = null; &#125;;&#125;;"},{"title":"PHP条形码函数","date":"2019-04-20T14:32:30.000Z","path":"posts/c150126e/","text":"原函数的地址davidscotttufts/php-barcode由于该函数中没有CODE128C的条形码，所以做了修改添加CODE128C代码如下(由于对条形码没有研究，可能会有问题) PHP1234567891011121314151617181920//仅支持纯数字，偶数长度时，是code128c,奇数长度时是code128c和code128b的混合$chksum = 105;$code_array = array(\"00\"=&gt;\"212222\",\"01\"=&gt;\"222122\",\"02\"=&gt;\"222221\",\"03\"=&gt;\"121223\",\"04\"=&gt;\"121322\",\"05\"=&gt;\"131222\",\"06\"=&gt;\"122213\",\"07\"=&gt;\"122312\",\"08\"=&gt;\"132212\",\"09\"=&gt;\"221213\",\"10\"=&gt;\"221312\",\"11\"=&gt;\"231212\",\"12\"=&gt;\"112232\",\"13\"=&gt;\"122132\",\"14\"=&gt;\"122231\",\"15\"=&gt;\"113222\",\"16\"=&gt;\"123122\",\"17\"=&gt;\"123221\",\"18\"=&gt;\"223211\",\"19\"=&gt;\"221132\",\"20\"=&gt;\"221231\",\"21\"=&gt;\"213212\",\"22\"=&gt;\"223112\",\"23\"=&gt;\"312131\",\"24\"=&gt;\"311222\",\"25\"=&gt;\"321122\",\"26\"=&gt;\"321221\",\"27\"=&gt;\"312212\",\"28\"=&gt;\"322112\",\"29\"=&gt;\"322211\",\"30\"=&gt;\"212123\",\"31\"=&gt;\"212321\",\"32\"=&gt;\"232121\",\"33\"=&gt;\"111323\",\"34\"=&gt;\"131123\",\"35\"=&gt;\"131321\",\"36\"=&gt;\"112313\",\"37\"=&gt;\"132113\",\"38\"=&gt;\"132311\",\"39\"=&gt;\"211313\",\"40\"=&gt;\"231113\",\"41\"=&gt;\"231311\",\"42\"=&gt;\"112133\",\"43\"=&gt;\"112331\",\"44\"=&gt;\"132131\",\"45\"=&gt;\"113123\",\"46\"=&gt;\"113321\",\"47\"=&gt;\"133121\",\"48\"=&gt;\"313121\",\"49\"=&gt;\"211331\",\"50\"=&gt;\"231131\",\"51\"=&gt;\"213113\",\"52\"=&gt;\"213311\",\"53\"=&gt;\"213131\",\"54\"=&gt;\"311123\",\"55\"=&gt;\"311321\",\"56\"=&gt;\"331121\",\"57\"=&gt;\"312113\",\"58\"=&gt;\"312311\",\"59\"=&gt;\"332111\",\"60\"=&gt;\"314111\",\"61\"=&gt;\"221411\",\"62\"=&gt;\"431111\",\"63\"=&gt;\"111224\",\"64\"=&gt;\"111422\",\"65\"=&gt;\"121124\",\"66\"=&gt;\"121421\",\"67\"=&gt;\"141122\",\"68\"=&gt;\"141221\",\"69\"=&gt;\"112214\",\"70\"=&gt;\"112412\",\"71\"=&gt;\"122114\",\"72\"=&gt;\"122411\",\"73\"=&gt;\"142112\",\"74\"=&gt;\"142211\",\"75\"=&gt;\"241211\",\"76\"=&gt;\"221114\",\"77\"=&gt;\"413111\",\"78\"=&gt;\"241112\",\"79\"=&gt;\"134111\",\"80\"=&gt;\"111242\",\"81\"=&gt;\"121142\",\"82\"=&gt;\"121241\",\"83\"=&gt;\"114212\",\"84\"=&gt;\"124112\",\"85\"=&gt;\"124211\",\"86\"=&gt;\"411212\",\"87\"=&gt;\"421112\",\"88\"=&gt;\"421211\",\"89\"=&gt;\"212141\",\"90\"=&gt;\"214121\",\"91\"=&gt;\"412121\",\"92\"=&gt;\"111143\",\"93\"=&gt;\"111341\",\"94\"=&gt;\"131141\",\"95\"=&gt;\"114113\",\"96\"=&gt;\"114311\",\"97\"=&gt;\"411113\",\"98\"=&gt;\"411311\",\"99\"=&gt;\"113141\",\"CODE B\"=&gt;\"114131\",\"CODE A\"=&gt;\"311141\",\"FNC 1\"=&gt;\"411131\",\"Start A\"=&gt;\"211412\",\"Start B\"=&gt;\"211214\",\"Start C\"=&gt;\"211232\",\"Stop\"=&gt;\"2331112\");$code_keys = array_keys($code_array);$code_values = array_flip($code_keys);$strlen = strlen($text);for ($i = 1; $i &lt;= $strlen; $i = $i + 2) &#123; $active_key = substr( $text, ($i-1), 2); if ($i == $strlen) &#123; $code_array_b = array(\"0\"=&gt;\"123122\",\"1\"=&gt;\"123221\",\"2\"=&gt;\"223211\",\"3\"=&gt;\"221132\",\"4\"=&gt;\"221231\",\"5\"=&gt;\"213212\",\"6\"=&gt;\"223112\",\"7\"=&gt;\"312131\",\"8\"=&gt;\"311222\",\"9\"=&gt;\"321122\"); $code_values_b = array(\"0\"=&gt;16,\"1\"=&gt;17,\"2\"=&gt;18,\"3\"=&gt;19,\"4\"=&gt;20,\"5\"=&gt;21,\"6\"=&gt;22,\"7\"=&gt;23,\"8\"=&gt;24,\"9\"=&gt;25); $code_string .= $code_array['CODE B'] . $code_array_b[$active_key]; $chksum += $code_values['CODE B'] * ($i + 1) / 2 + $code_values_b[$active_key] * ($i + 3) / 2; &#125; else &#123; $code_string .= $code_array[$active_key]; $chksum += $code_values[$active_key] * ($i + 1) / 2; &#125;&#125;$code_string .= $code_array[$code_keys[$chksum % 103]];$code_string = \"211232\" . $code_string . \"2331112\";"},{"title":"PHP随机字符串","date":"2019-04-13T15:20:28.000Z","path":"posts/bde46b03/","text":"12345678910111213141516171819202122232425262728/** * 获得随机字符串 * @param $length 需要的长度 * @param $multiplex 字符是否可以复用 * @param $string 随机的字符串 * @return string|bool 返回随机字符串|false */function getRandStr($length, $multiplex = true, $string = 'abcdefghijkmnpqrstuvwxyz0123456789ABCDEFGHIGKLMNPQRSTUVWXYZ')&#123; if($length &lt; 0) &#123; return false; &#125; $strlen = strlen($string); if (!$multiplex) &#123; if ($length &gt; $strlen) &#123; return false; &#125; $shuffled = str_shuffle($string); $rand_str = substr($shuffled, 0, $length); &#125; else &#123; $rand_str = ''; $max = $strlen-1; for ($i = 0; $i &lt; $length; $i++) &#123; $rand_str .= $string[mt_rand(0, $max)]; &#125; &#125; return $rand_str;&#125;"},{"title":"Jquery和php文件上传的进度条","date":"2019-04-06T10:16:24.000Z","path":"posts/ad3385d8/","text":"HTML12345&lt;form id=\"form\"&gt; &lt;input type=\"file\" name=\"file\" id=\"file\"&gt; &lt;progress value=\"0\" max=\"100\"&gt;&lt;/progress&gt; &lt;input type=\"button\" id=\"button\" value=\"点击文件上传\"&gt;&lt;/form&gt; JQUERY123456789101112131415161718192021222324252627$('#button').click(function()&#123; var data=new FormData($('#form')[0]); $.ajax(&#123; url:'test.php', data:data, type:'post', xhr: function()&#123; myXhr = $.ajaxSettings.xhr(); if(myXhr.upload)&#123; myXhr.upload.addEventListener('progress',progressFunc, false); &#125; return myXhr; &#125;, success:function(data)&#123; alert(data); &#125;, processData: false, contentType: false &#125;)&#125;)function progressFunc(e) &#123; if (e.lengthComputable) &#123; var percentComplete=e.loaded/e.total*100; $('progress').attr('value',percentComplete); &#125;&#125; PHP1234567$name=iconv(\"UTF-8\",\"gb2312\",$_FILES[\"file\"][\"name\"]);//解决文件名乱码$result=move_uploaded_file($_FILES[\"file\"][\"tmp_name\"],$name);if($result)&#123; echo '上传文件成功';&#125;else&#123; echo '上传文件失败';&#125;"},{"title":"Layui下拉框lay-search不区分大小写","date":"2019-03-30T14:35:28.000Z","path":"posts/80a24b11/","text":".layui-form-select dl{margin: 0 !important;}使用的layui版本layui-v2.4.5Layui的表单下拉框在使用lay-search时，默认是区分大小写的： HTML 区分大小写12345678910111213141516171819202122232425&lt;form class=\"layui-form\" action=\"\"&gt; &lt;select name=\"modules\" lay-search=\"\"&gt; &lt;option value=\"\"&gt;直接选择或搜索选择&lt;/option&gt; &lt;option value=\"1\"&gt;layer&lt;/option&gt; &lt;option value=\"2\"&gt;form&lt;/option&gt; &lt;option value=\"3\"&gt;layim&lt;/option&gt; &lt;option value=\"4\"&gt;element&lt;/option&gt; &lt;option value=\"5\"&gt;laytpl&lt;/option&gt; &lt;option value=\"6\"&gt;upload&lt;/option&gt; &lt;option value=\"7\"&gt;laydate&lt;/option&gt; &lt;option value=\"8\"&gt;laypage&lt;/option&gt; &lt;option value=\"9\"&gt;flow&lt;/option&gt; &lt;option value=\"10\"&gt;util&lt;/option&gt; &lt;option value=\"11\"&gt;code&lt;/option&gt; &lt;option value=\"12\"&gt;tree&lt;/option&gt; &lt;option value=\"13\"&gt;layedit&lt;/option&gt; &lt;option value=\"14\"&gt;nav&lt;/option&gt; &lt;option value=\"15\"&gt;tab&lt;/option&gt; &lt;option value=\"16\"&gt;table&lt;/option&gt; &lt;option value=\"17\"&gt;select&lt;/option&gt; &lt;option value=\"18\"&gt;checkbox&lt;/option&gt; &lt;option value=\"19\"&gt;switch&lt;/option&gt; &lt;option value=\"20\"&gt;radio&lt;/option&gt; &lt;/select&gt;&lt;/form&gt; 区分大小写效果搜索选择框直接选择或搜索选择layerformlayimelementlaytpluploadlaydatelaypageflowutilcodetreelayeditnavtabtableselectcheckboxswitchradio 但是有些时候并不是特别希望它区分的这么细，那么我们修改源码，让他不区分大小写搜索，如果用的是layui.js,则找到lay/form.js，如果是layui.all.js，则直接修改layui.all.js。由于版本不同，压缩后的js代码并不一致，所以下面的方法可能不支持其他版本layui 找到下面的代码1l.indexOf(e)===-1; 替换成1l.toLowerCase().indexOf(e.toLowerCase())===-1; 或者也可以加属性来控制它是否需要大小写，比如我们加上case-sensitive=”false”来关闭区分大小写只要将上面的代码替换成替换成1p.attr(\"case-sensitive\")===\"false\"?l.toLowerCase().indexOf(e.toLowerCase())===-1:l.indexOf(e)===-1; HTML 不区分大小写12345678910111213141516171819202122232425&lt;form class=\"layui-form\" action=\"\"&gt; &lt;select name=\"modules\" lay-search=\"\" case-sensitive=\"false\"&gt; &lt;option value=\"\"&gt;直接选择或搜索选择&lt;/option&gt; &lt;option value=\"1\"&gt;layer&lt;/option&gt; &lt;option value=\"2\"&gt;form&lt;/option&gt; &lt;option value=\"3\"&gt;layim&lt;/option&gt; &lt;option value=\"4\"&gt;element&lt;/option&gt; &lt;option value=\"5\"&gt;laytpl&lt;/option&gt; &lt;option value=\"6\"&gt;upload&lt;/option&gt; &lt;option value=\"7\"&gt;laydate&lt;/option&gt; &lt;option value=\"8\"&gt;laypage&lt;/option&gt; &lt;option value=\"9\"&gt;flow&lt;/option&gt; &lt;option value=\"10\"&gt;util&lt;/option&gt; &lt;option value=\"11\"&gt;code&lt;/option&gt; &lt;option value=\"12\"&gt;tree&lt;/option&gt; &lt;option value=\"13\"&gt;layedit&lt;/option&gt; &lt;option value=\"14\"&gt;nav&lt;/option&gt; &lt;option value=\"15\"&gt;tab&lt;/option&gt; &lt;option value=\"16\"&gt;table&lt;/option&gt; &lt;option value=\"17\"&gt;select&lt;/option&gt; &lt;option value=\"18\"&gt;checkbox&lt;/option&gt; &lt;option value=\"19\"&gt;switch&lt;/option&gt; &lt;option value=\"20\"&gt;radio&lt;/option&gt; &lt;/select&gt;&lt;/form&gt; 不区分大小写效果搜索选择框直接选择或搜索选择layerformlayimelementlaytpluploadlaydatelaypageflowutilcodetreelayeditnavtabtableselectcheckboxswitchradio layui.use('form',function(){var form = layui.form;})"},{"title":"CSS实现导航栏下划线跟随移动效果","date":"2019-03-23T15:20:25.000Z","path":"posts/a295304e/","text":"导航栏OneTwoThreeFourFive HTML12345678&lt;ul class=\"nav\"&gt; &lt;li&gt;One&lt;/li&gt; &lt;li&gt;Two&lt;/li&gt; &lt;li&gt;Three&lt;/li&gt; &lt;li&gt;Four&lt;/li&gt; &lt;li&gt;Five&lt;/li&gt; &lt;li class=\"underline\"&gt;&lt;/li&gt;&lt;/ul&gt; CSS12345678910111213141516171819202122232425262728293031323334353637383940414243444546.nav &#123; list-style-type: none; position: relative; padding: 0; font-size: 0; width: 750px; height: 50px; user-select: none; overflow: hidden; z-index: 10;&#125;.nav li &#123; display: inline-block; width: 20%; height: 100%; font-size: 18px; line-height: 50px; text-align: center; cursor: pointer; color: #666;&#125;.nav .underline &#123; position: absolute; width: 20%; height: 3px; background: #00ccff; bottom: 3px; left: 0; z-index: -1; transition: left .2s ease-in-out;&#125;.nav li:nth-child(1):hover ~ .underline &#123; left: 0%;&#125;.nav li:nth-child(2):hover ~ .underline &#123; left: 20%;&#125;.nav li:nth-child(3):hover ~ .underline &#123; left: 40%;&#125;.nav li:nth-child(4):hover ~ .underline &#123; left: 60%;&#125;.nav li:nth-child(5):hover ~ .underline &#123; left: 80%;&#125;"},{"title":"查询Mysql数据库中每个表的大小","date":"2019-03-16T15:52:39.000Z","path":"posts/6489df54/","text":"第一步：进入指定的数据库1use information_schema 第二步：查询所有数据的大小1SELECT `table_name`,DATA_LENGTH,INDEX_LENGTH FROM TABLES WHERE `table_schema`=&apos;[库名]&apos;; 这个表中主要大小相关的字段意思：TABLE_SCHEMA: 库名TABLE_NAME: 表名ENGINE: 存储引擎TABLE_ROWS: 该表记录数DATA_LENGTH: 表大小（单位字节）INDEX_LENGTH: 表索引大小（单位字节）"},{"title":"PHP二维数组根据某个键进行排序","date":"2019-03-09T13:56:15.000Z","path":"posts/b749b54d/","text":"有个用户的二维数组12345678910$arr = [ ['id' =&gt; 1, 'name' =&gt; 'Alexander', 'age' =&gt; 26], ['id' =&gt; 4, 'name' =&gt; 'James', 'age' =&gt; 18], ['id' =&gt; 3, 'name' =&gt; 'David', 'age' =&gt; 22], ['id' =&gt; 7, 'name' =&gt; 'Anthony', 'age' =&gt; 25], ['id' =&gt; 5, 'name' =&gt; 'Emily', 'age' =&gt; 18], ['id' =&gt; 8, 'name' =&gt; 'Elizabeth', 'age' =&gt; 23], ['id' =&gt; 2, 'name' =&gt; 'Lauren', 'age' =&gt; 18], ['id' =&gt; 6, 'name' =&gt; 'Alyssa', 'age' =&gt; 17]]; 当需要用户年龄(age)来进行从小到大排序时12$sort_column = array_column($arr, 'age');array_multisort($sort_column, SORT_ASC, $arr); $arr数组会变成这样12345678910$arr = [ ['id' =&gt; 6, 'name' =&gt; 'Alyssa', 'age' =&gt; 17], ['id' =&gt; 2, 'name' =&gt; 'Lauren', 'age' =&gt; 18], ['id' =&gt; 4, 'name' =&gt; 'James', 'age' =&gt; 18], ['id' =&gt; 5, 'name' =&gt; 'Emily', 'age' =&gt; 18], ['id' =&gt; 3, 'name' =&gt; 'David', 'age' =&gt; 22], ['id' =&gt; 8, 'name' =&gt; 'Elizabeth', 'age' =&gt; 23], ['id' =&gt; 7, 'name' =&gt; 'Anthony', 'age' =&gt; 25], ['id' =&gt; 1, 'name' =&gt; 'Alexander', 'age' =&gt; 26],]; 当需要用户年龄(age)来进行从小到大,并且用户编号(id)从大到小排序时12345foreach ($arr as $key =&gt; $value) &#123; $id_arr[] = $value['id']; $age_arr[] = $value['age'];&#125;array_multisort($age_arr, SORT_ASC, $id_arr, SORT_DESC, $arr); $arr数组会变成这样12345678910$arr = [ ['id' =&gt; 6, 'name' =&gt; 'Alyssa', 'age' =&gt; 17], ['id' =&gt; 5, 'name' =&gt; 'Emily', 'age' =&gt; 18], ['id' =&gt; 4, 'name' =&gt; 'James', 'age' =&gt; 18], ['id' =&gt; 2, 'name' =&gt; 'Lauren', 'age' =&gt; 18], ['id' =&gt; 3, 'name' =&gt; 'David', 'age' =&gt; 22], ['id' =&gt; 8, 'name' =&gt; 'Elizabeth', 'age' =&gt; 23], ['id' =&gt; 7, 'name' =&gt; 'Anthony', 'age' =&gt; 25], ['id' =&gt; 1, 'name' =&gt; 'Alexander', 'age' =&gt; 26],];"},{"title":"纯CSS实现滑动开关效果","date":"2019-03-02T11:25:23.000Z","path":"posts/56d42c75/","text":"滑动开关 HTML1234&lt;label class=\"switch\"&gt; &lt;input type=\"checkbox\" name=\"test\"&gt; &lt;div class=\"slider\"&gt;&lt;/div&gt;&lt;/label&gt; CSS1234567891011121314151617181920212223242526272829.switch &#123; display: block; width: 50px; height: 25px; border: 1px solid #999; border-radius: 13.5px; position: relative; user-select: none; cursor: pointer;&#125;.slider&#123; content: ''; width: 40%; height: 80%; margin: 5%; border-radius: 50%; background-color: #38e638; position: absolute; top: 0; left: 0; transition: left .3s;&#125;.switch input&#123; display: none;&#125;.switch input:checked ~ .slider&#123; left: 50%; background-color: #999;&#125;"},{"title":"CSS实现按钮点击波纹扩散效果","date":"2019-02-23T14:50:23.000Z","path":"posts/19701066/","text":"按钮点击效果 HTML1&lt;div class=&quot;button&quot;&gt;点击效果&lt;/div&gt; CSS1234567891011121314151617181920212223242526272829303132.button&#123; position: relative; width: 150px; height: 50px; line-height: 50px; font-size: 16px; text-align: center; border: 1px solid #ccc; background: #eee; overflow: hidden; user-select: none; cursor: pointer;&#125;.button:after&#123; position: absolute; content: &#x27;&#x27;; top: 0; left: 0; width: 100%; height: 100%; background: #333; opacity: 0; transition: all .5s;&#125;.button:active:after&#123; top: 50%; left: 50%; width: 0; height: 0; opacity: .3; transition: all 0s;&#125;"},{"title":"Hello World","date":"2019-01-06T08:28:17.391Z","path":"posts/4a17b156/","text":"Welcome to XiaGuochang’s Blog!"}]